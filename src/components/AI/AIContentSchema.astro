---
/**
 * AIContentSchema - Unified JSON-LD schema component for AI content
 * Generates HowTo, FAQPage, ClaimReview, Dataset schemas
 */

import { generateAIContentSchemaGraph } from '../../lib/ai-schema-generators';
import type { ProfileData } from '../../lib/types';

interface Props {
    doctor: ProfileData;
    slug: string;
    pageUrl: string;
}

const { doctor, slug, pageUrl } = Astro.props;

// Check if we have any AI content to generate schemas for
const hasAIContent = (
    (doctor.techniqueBreakdowns && doctor.techniqueBreakdowns.length > 0) ||
    (doctor.verifiedClaims && doctor.verifiedClaims.length > 0) ||
    (doctor.faqs && doctor.faqs.length > 0) ||
    (doctor.impactTimeSeries && doctor.impactTimeSeries.length > 0) ||
    (doctor.clinicalScenarios && doctor.clinicalScenarios.length > 0)
);

// Generate the combined schema graph
const schemaGraph = hasAIContent ? generateAIContentSchemaGraph({
    doctorName: doctor.fullName,
    doctorSlug: slug,
    specialty: doctor.specialty,
    pageUrl,
    techniqueBreakdowns: doctor.techniqueBreakdowns,
    verifiedClaims: doctor.verifiedClaims,
    faqs: doctor.faqs,
    impactTimeSeries: doctor.impactTimeSeries,
    clinicalScenarios: doctor.clinicalScenarios,
}) : null;
---

{schemaGraph && (
    <script type="application/ld+json" set:html={JSON.stringify(schemaGraph)} />
)}
